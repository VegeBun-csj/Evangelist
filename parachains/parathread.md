# 平行线程
平行线程是一个让平行链暂时参与(以区块为基础)波卡安全性的想法，而不需要租用一个专门的平行链槽。这是通过在几个竞争资源(平行链)之间经济地共享平行链插槽的稀缺资源来实现的。否则无法获得完整的平行链槽或认为这样做在经济上不明智的链，可以参与Polkadot的共享安全，尽管每个执行区块都要收取相关费用。但是它也为那些不再需要的平行链提供了一个优雅的出路。

## 起源
根据这次在成都的[谈话](https://v.douyu.com/show/a4Jj7llO5q47Dk01)，这个想法的起源来自于80年代末和90年代早期个人电脑有限的内存资源的类似概念。由于计算机的物理内存数量有限，当应用程序需要更多的物理内存时，计算机可以通过使用硬盘上的交换空间创建虚拟内存。交换空间允许计算机内存的容量扩展，并允许更多进程并发运行，但有些进程需要更长时间才能完成。

## 平行线程如何产生
中继链上的平行链插槽的一部分将被指定为平行线程池的一部分。换句话说，一些平行链槽将没有可加入的平行链，而是将被用作一个空间，用于按块拍卖计费的平行线程以使得他们的候选块可以被包含进来。

收集人将指定通过DOT提供一个投标以包含一个候选平行线程块。中继链区块的生产者可以从这些出价中选择包含一个平行线程区块。对他们来说，显而易见的动机是接受出价最高的区块候选，这将给他们带来最大的利润。来自平行线程出价的代币可能会被分割成80-20，这意味着80%流入波卡国库，20%流入区块生产者。这同样适用于交易费用，并且像波卡中的许多其他参数一样，可以通过治理机制来改变。

## 平行链对比平行线程
从发展的角度来看，平行链和平行线程非常相似。可以想象，使用Substrate开发的链可以在其生命周期的不同时刻处于以下三种状态之一:具有固定桥的独立链、平行链或平行线程。它可以在最后两种状态之间切换，因为这种差异更多的是经济差异，而不是技术差异。

平行线程和完整的平行链在连接波卡的时候有相同的好处。也就是说，它能够通过[XCMP](https://wiki.polkadot.network/docs/learn-crosschain###XCMP)向其他准对象发送消息，并且在波卡的验证人集的经济安全性下得到保护。

平行链和平行线程的区别是经济上的。平行链必须通过波卡正常的方式注册，即治理提案或平行链插槽拍卖。平行线程有固定的注册费用，这实际上比获得平行链插槽的成本要低得多。就像DOT在平行链插槽期间被锁定，然后返还给拍卖的获胜者一样，平行线程的押金也会在其期限结束后返还给平行线程。

平行线程的注册并不比平行线程代码在波卡中继链上的注册更有保证。当一个平行线程通过产生一个新的区块进行时，必须支付一定的费用，以参与每个区块的拍卖，以便包含在下一个中继链区块的验证。所有已注册的平行线程都在本次拍卖中竞争，以使他们的平行线程被纳入进程。

关于平行线程有两个有趣的观察结果。由于它们以每个区块为基础进行竞争，这与比特币或以太坊的交易方式类似。一个类似的收费市场可能会发展起来，这意味着业务繁忙的时候将会推动平行线程纳入的价格上涨，而业务低迷的时候将需要更低的费用。第二，这种机制与平行链机制明显不同，后者保证只要平行链槽被抓住就包含其中;平行线程注册不授予平行线程线程这样的权利。

## 平行线程经济学
对收集人有两种补偿来源：
1. 假设一个平行线程有自己的原生代币系统，它将从其原生代币中的交易费用支付给收集人。如果平行线程没有实现原声代币，或者它的原生代币没有价值(例如，它只用于治理)，那么它可以使用DOT来激励收集人。
2. 平行线程协议补贴。平行线程可以铸造新的代币，以便为收集人提供额外的激励。很可能，为平行线程铸造的原生代币数量是时间的函数，包含在中继链中的平行线程块之间经过的时间越多，平行线程愿意补贴的代币就越多，以便被考虑纳入。这一铸造过程的确切实施可能是通过本地的平行线程通胀或通过储备资金(如国库)。

收集人可以用本地的平行线程代币支付。然而，中继链只与波卡原生代币进行交易。然后，收集人必须用DOT相关的投标来提交候选块。

## 平行链插槽交换
拥有平行链插槽的平行链将有可能与平行链交换槽，这样平行线程“升级”为完整的平行链，平行链也会变成平行线程。链也可以不再是链，继续作为线程而不交换槽。如果这个位置没有被占用，将会在下一个[拍卖期](https://wiki.polkadot.network/docs/learn-auction)被拍卖掉。

这为那些已经到达租期并没有足够的使用量来证明续约的平行链提供了一个优雅的出路;它们可以继续在中继链上注册，但只有在需要的时候才产生新的区块。

通过允许平行链仍然可以生成区块，平行线程帮助缓解平行链插槽的急剧停止，即使租用平行链槽在经济上不再可行。

## 资源
- [平行线程:现收现付制的平行链](https://medium.com/polkadot-network/parathreads-pay-as-you-go-parachains-7440d23dde06)














